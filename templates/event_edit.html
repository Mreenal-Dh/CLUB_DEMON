{% extends 'base.html' %}
{% block title %}{{ 'Edit Event' if event else 'New Event' }}{% endblock %}

{% block content %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const bgLayer = document.querySelector('.bg-layer');
        if (bgLayer) {
            bgLayer.classList.add('club-detail-bg');
        }
    });
</script>

<section class="form-page">
    <div class="form-container">
        <div class="form-header">
            <h1>{{ 'Edit Event' if event else 'Create New Event' }}</h1>
            <a href="{{ url_for('manager_dashboard') }}" class="btn-back">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="19" y1="12" x2="5" y2="12"></line>
                    <polyline points="12 19 5 12 12 5"></polyline>
                </svg>
                Back to Dashboard
            </a>
        </div>

        <form method="POST" class="edit-form">
            <div class="form-grid">
                <!-- Title -->
                <div class="form-group full-width">
                    <label for="title">Event Title *</label>
                    <input type="text" 
                           id="title" 
                           name="title" 
                           value="{{ event.title if event }}" 
                           required
                           placeholder="e.g., Tech Symposium 2025">
                </div>

                <!-- Category -->
                <div class="form-group">
                    <label for="category">Category *</label>
                    <select id="category" name="category" required>
                        <option value="">Select Category</option>
                        <option value="Technical" {% if event and event.category == 'Technical' %}selected{% endif %}>Technical</option>
                        <option value="Cultural" {% if event and event.category == 'Cultural' %}selected{% endif %}>Cultural</option>
                        <option value="Sports" {% if event and event.category == 'Sports' %}selected{% endif %}>Sports</option>
                        <option value="Competition" {% if event and event.category == 'Competition' %}selected{% endif %}>Competition</option>
                        <option value="Workshop" {% if event and event.category == 'Workshop' %}selected{% endif %}>Workshop</option>
                        <option value="Seminar" {% if event and event.category == 'Seminar' %}selected{% endif %}>Seminar</option>
                        <option value="Exhibition" {% if event and event.category == 'Exhibition' %}selected{% endif %}>Exhibition</option>
                        <option value="Professional" {% if event and event.category == 'Professional' %}selected{% endif %}>Professional</option>
                    </select>
                </div>

                <!-- Size Class -->
                <div class="form-group">
                    <label for="size_class">Display Size *</label>
                    <select id="size_class" name="size_class" required>
                        <optgroup label="Vertical Sizes">
                            <option value="size-small" {% if event and event.size_class == 'size-small' %}selected{% endif %}>Small (2 rows, 1 col)</option>
                            <option value="size-medium" {% if event and event.size_class == 'size-medium' %}selected{% endif %}>Medium (3 rows, 1 col)</option>
                            <option value="size-large" {% if event and event.size_class == 'size-large' %}selected{% endif %}>Large (4 rows, 1 col)</option>
                            <option value="size-tall" {% if event and event.size_class == 'size-tall' %}selected{% endif %}>Tall (5 rows, 1 col)</option>
                        </optgroup>
                        <optgroup label="Horizontal Sizes">
                            <option value="size-wide" {% if event and event.size_class == 'size-wide' %}selected{% endif %}>Wide (2 rows, 2 cols)</option>
                            <option value="size-extra-wide" {% if event and event.size_class == 'size-extra-wide' %}selected{% endif %}>Extra Wide (2 rows, 3 cols)</option>
                            <option value="size-super-wide" {% if event and event.size_class == 'size-super-wide' %}selected{% endif %}>Super Wide (3 rows, 4 cols)</option>
                        </optgroup>
                        <optgroup label="Special Sizes">
                            <option value="size-square-large" {% if event and event.size_class == 'size-square-large' %}selected{% endif %}>Square Large (2x2)</option>
                            <option value="size-wide-tall" {% if event and event.size_class == 'size-wide-tall' %}selected{% endif %}>Wide Tall (3 rows, 2 cols)</option>
                        </optgroup>
                    </select>
                    <small class="help-text">Controls the card size in the Pinterest grid layout</small>
                </div>

                <!-- Date -->
                <div class="form-group">
                    <label for="date">Date *</label>
                    <input type="text" 
                           id="date" 
                           name="date" 
                           value="{{ event.date if event }}" 
                           required
                           placeholder="e.g., October 25, 2025">
                </div>

                <!-- Time -->
                <div class="form-group">
                    <label for="time">Time *</label>
                    <input type="text" 
                           id="time" 
                           name="time" 
                           value="{{ event.time if event }}" 
                           required
                           placeholder="e.g., 9:00 AM - 5:00 PM">
                </div>

                <!-- Location -->
                <div class="form-group">
                    <label for="location">Location *</label>
                    <input type="text" 
                           id="location" 
                           name="location" 
                           value="{{ event.location if event }}" 
                           required
                           placeholder="e.g., Main Auditorium">
                </div>

                <!-- Organizer -->
                <div class="form-group">
                    <label for="organizer">Organized By *</label>
                    <input type="text" 
                           id="organizer" 
                           name="organizer" 
                           value="{{ event.organizer if event }}" 
                           required
                           placeholder="e.g., Code Warriors">
                </div>

                <!-- Image URL -->
                <div class="form-group full-width">
                    <label for="image_url">Image URL</label>
                    <input type="text" 
                           id="image_url" 
                           name="image_url" 
                           value="{{ event.image_url if event else '/static/images/club.jpg' }}"
                           placeholder="/static/images/event.jpg">
                    <small class="help-text">Path to event image (default: /static/images/club.jpg)</small>
                </div>

                <!-- Description -->
                <div class="form-group full-width">
                    <label for="description">Description *</label>
                    <textarea id="description" 
                              name="description" 
                              rows="6" 
                              required
                              placeholder="Enter detailed event description...">{{ event.description if event }}</textarea>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="form-actions">
                <button type="submit" class="btn-submit">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                        <polyline points="17 21 17 13 7 13 7 21"></polyline>
                        <polyline points="7 3 7 8 15 8"></polyline>
                    </svg>
                    {{ 'Update Event' if event else 'Create Event' }}
                </button>
                <a href="{{ url_for('manager_dashboard') }}" class="btn-cancel">Cancel</a>
            </div>
        </form>
    </div>
</section>

<style>
.form-page {
    max-width: 900px;
    margin: 0 auto;
    padding: 32px 40px 80px;
}

.form-container {
    background: linear-gradient(135deg, rgba(12,16,22,0.95), rgba(18,24,33,0.92));
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 20px;
    padding: 40px;
    box-shadow: 0 16px 50px rgba(2,6,12,0.7);
}

.form-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 32px;
    padding-bottom: 24px;
    border-bottom: 1px solid rgba(255,255,255,0.08);
}

.form-header h1 {
    margin: 0;
    font-size: 28px;
}

.btn-back {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.15);
    color: var(--text-100);
    text-decoration: none;
    border-radius: 8px;
    font-weight: 600;
    font-size: 14px;
    transition: all 0.3s;
}

.btn-back:hover {
    background: rgba(255,255,255,0.08);
    transform: translateX(-4px);
}

.edit-form {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.form-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.form-group.full-width {
    grid-column: 1 / -1;
}

.form-group label {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-100);
    letter-spacing: 0.3px;
}

.form-group input,
.form-group select,
.form-group textarea {
    width: 100%;
    padding: 12px 16px;
    background: rgba(255,255,255,0.04);
    border: 2px solid rgba(255,255,255,0.08);
    border-radius: 8px;
    color: var(--text-100);
    font-size: 15px;
    font-weight: 500;
    transition: all 0.3s;
    box-sizing: border-box;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    outline: none;
    background: rgba(255,255,255,0.06);
    border-color: rgba(70,130,255,0.5);
    box-shadow: 0 0 0 4px rgba(70,130,255,0.1);
}

.form-group textarea {
    resize: vertical;
    font-family: inherit;
    line-height: 1.6;
}

.help-text {
    font-size: 12px;
    color: var(--muted);
    font-weight: 500;
}

.form-actions {
    display: flex;
    gap: 16px;
    padding-top: 24px;
    border-top: 1px solid rgba(255,255,255,0.08);
}

.btn-submit {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 16px 32px;
    background: linear-gradient(135deg, rgba(70,130,255,0.9), rgba(90,150,255,0.7));
    border: 1px solid rgba(70,130,255,0.3);
    color: white;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 8px 24px rgba(70,130,255,0.35);
}

.btn-submit:hover {
    transform: translateY(-3px);
    box-shadow: 0 14px 36px rgba(70,130,255,0.5);
    background: linear-gradient(135deg, rgba(70,130,255,1), rgba(90,150,255,0.85));
}

.btn-cancel {
    padding: 16px 32px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.15);
    color: var(--text-100);
    text-decoration: none;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 700;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.btn-cancel:hover {
    background: rgba(255,255,255,0.08);
}

@media (max-width: 768px) {
    .form-page {
        padding: 20px 16px 60px;
    }
    
    .form-container {
        padding: 24px 20px;
    }
    
    .form-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 16px;
    }
    
    .form-grid {
        grid-template-columns: 1fr;
    }
    
    .form-actions {
        flex-direction: column;
    }
}
</style>
{% endblock %}
